








































































































































































































































































































































































































































































































































































<!DOCTYPE html><html lang="en"><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>An Adversarial (re)Analysis of Zhou/Firestone 2019 | Blog</title><meta name="description" content="Things i gone and done "><meta itemprop="name" content="Jonny Saunders"><meta itemprop="description" content="Reanalyzing Zhou &amp; Firestone&#39;s adversarial image experiments"><meta itemprop="image" content="/blog/blog/assets/images/zhou_header.png"><meta property="og:url" content="https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/"><meta property="og:type" content="website"><meta property="og:title" content="An Adversarial (re)Analysis of Zhou/Firestone 2019 | Blog"><meta property="og:site_name" content="Blog"><meta property="og:description" content="Reanalyzing Zhou &amp; Firestone&#39;s adversarial image experiments"><meta property="og:image" content="https://jon-e.net/blog/blog/assets/images/zhou_header.png"><meta name="twitter:url" content="https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/"><meta name="twitter:url" content=""><meta name="twitter:card" content="summary"><meta name="twitter:title" content="An Adversarial (re)Analysis of Zhou/Firestone 2019 | Blog"><meta name="twitter:site" content="Blog"><meta name="twitter:description" content="Reanalyzing Zhou &amp; Firestone&#39;s adversarial image experiments"><meta name="twitter:creator" content="@json_dirs"><meta property="twitter:image" content="https://jon-e.net/blog/blog/assets/images/zhou_header.png"><link rel="icon" type="image/x-icon" href="/blog/assets/images/favicon.ico"> <!-- jquery --> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script> <!-- Fancybox --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" /> <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script> <!-- Bootstrap TOC --><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.css"> <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.js"></script><link rel="stylesheet" href="/blog/assets/css/app.min.css"><style> .hljs{display:block;overflow-x:auto;padding:0.5em;background:#23241f}.hljs,.hljs-tag,.hljs-subst{color:#f8f8f2}.hljs-strong,.hljs-emphasis{color:#a8a8a2}.hljs-bullet,.hljs-quote,.hljs-number,.hljs-regexp,.hljs-literal,.hljs-link{color:#ae81ff}.hljs-code,.hljs-title,.hljs-section,.hljs-selector-class{color:#a6e22e}.hljs-strong{font-weight:bold}.hljs-emphasis{font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-name,.hljs-attr{color:#f92672}.hljs-symbol,.hljs-attribute{color:#66d9ef}.hljs-params,.hljs-class .hljs-title{color:#f8f8f2}.hljs-string,.hljs-type,.hljs-built_in,.hljs-builtin-name,.hljs-selector-id,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-addition,.hljs-variable,.hljs-template-variable{color:#e6db74}.hljs-comment,.hljs-deletion,.hljs-meta{color:#75715e}</style><!-- <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.13.1/build/highlight.min.js"></script> --> <!-- <script>hljs.initHighlightingOnLoad();</script> --> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127799940-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-127799940-1'); </script><link rel="alternate" type="application/rss+xml" title="Blog" href="/blog/feed.xml"><link rel="canonical" href="/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/"></head></head><body id="an-adversarial-re-analysis-of-zhou-firestone-2019" class="post-layout"><header class="header"> <a class="header__title" href="https://jon-e.net/blog/">Blog</a><nav><ul class="header__list"><li><a href="/blog/">Stories</a></li><li><span class="popup__open">Contact</span></li></ul></nav></header><main class="üíà"><div class="post"><article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><div class="post__header section-padding--double"><div class="grid-small"><h2 itemprop="name headline">An Adversarial (re)Analysis of Zhou/Firestone 2019</h2><time class="post__date" datetime="2019-04-09T00:00:00-07:00" itemprop="datePublished">9 Apr 2019</time></div></div><div class="post__img"><div><figure class="absolute-bg" style="background-image: url('/blog/assets/images/zhou_header.png');"></figure></div></div><!--<div data-spy="scroll" data-target="#toc" class="post__content section-padding"> --> <!--<div class="container post-container"> --><div class="post-container"> <!--<div class="row"> --> <!--<div class="col-md-9 col-sm-12 post__content section-padding" id="markdown" itemprop="articleBody"> --><div class="post__content section-padding" id="markdown" itemprop="articleBody"><p>This post is a reanalysis of Zhenglong Zhou and Chaz Firestone‚Äôs paper ‚ÄúHumans can deciper adversarial images,‚Äù so let‚Äôs get some links out of the way</p><ul><li><strong>Paper</strong> - Zhou Z, Firestone C. <a href="https://www.nature.com/articles/s41467-019-08931-6">Humans can deciper adversarial images</a>. <em>Nature Communications</em> 10(1):1334 p.2041-1723, DOI:10.1038/s41467-019-08931-6</li><li><a href="https://arxiv.org/abs/1809.04120"><strong>Preprint</strong></a></li><li><a href="https://osf.io/uknbh/"><strong>Data and Code on OSF</strong></a></li></ul><h1 id="overview">Overview</h1><p>Chaz Firestone came and presented this data at the UO‚Äôs cognitive neuroscience seminar series this winter just before the paper came out. The idea is compelling: Convolutional neural nets trained to classify images are vulnerable to adversarial attacks where images can be manipulated or synthesized to trigger a specific categorization.</p><p>On their face, these adversarial images highlight the dramatic differences between the human/mammalian visual system ‚Äì the types of things that fool us are very different than tactically adding static throughout an image. However if there were any overlap between the types of adversarial image manipulations that fool us and fool CNNs, they argue it would point to a <em>possible</em> mechanistic overlap.</p><p>They use two types of adversarial images:</p><blockquote><p><strong>Fooling images</strong> are otherwise meaningless patterns that are classified as familiar objects by a machine-vision system.</p></blockquote><p><img src="/blog/assets/images/fooling_image.png" alt="o ya u got me" /> <em>ya fooled me doc</em></p><p>and</p><blockquote><p><strong>Perturbed images</strong> are images that would normally be classified accurately and straightforwardly [‚Ä¶] but that are perturbed only slightly to produce a completely different classification by the machine</p></blockquote><p><img src="/blog/assets/images/perturbed_image.png" alt="youch i am tricked!" /> <em>youch wat trickery!</em></p><p>They present 8 experiments with 5 image sets that mostly ask human subjects to guess what a computer would classify the images as ‚Äì what they call ‚Äúmachine theory of mind‚Äù ‚Äì although the degree to which that is different than just having people classify images is ambiguous in their data.</p><h1 id="clarifying-hypotheses">Clarifying Hypotheses</h1><p>There seems to be an abnormally high airgap between data and interpretation here that I think is worthy of careful handling. The ultimate motivation here is to detect some similarity between CNNs and mammalian/human visual systems, and since CNNs seem to be vulnerable to adversarially manipulated images, if there is mechanistic overlap humans should be too. The authors aim to fill the empirical gap where, according to them, no one has actually tested whether humans misclassify these images</p><blockquote><p>A primary factor that makes adversarial images so intriguing is the intuitive assumption that a human would not classify the image as the machine does. (Indeed, this is part of what makes animage‚Äúadversarial‚Äùin thefirst place, though that definition is notyet fully settled.) However, surprisingly little work has actively explored this assumption by testing human performance on such images, even though it is often asserted that adversarial images are ‚Äútotally unrecognizable to human eyes‚Äù</p></blockquote><p>There are a number of <em>very similar</em> hypotheses and results that are possible here, we should delineate between them.</p><p>The most straightforward test of a hypothesis would be:</p><ol><li><p>Base image, well classified by humans and CNNs -&gt; Perturbed image, CNNs consistent misclassify -&gt; If humans misclassify in the same way and at same rate, implied mechanistic similarity.</p><p>A critical component of this is that the image is <em>mis</em>classified according to humans, or classified in a way that is not ‚Äúwhat is looks like.‚Äù There is a tautology that makes this experiment impossible (as the authors note) - if the adversarially manipulated image didn‚Äôt still ‚Äúlook like‚Äù the base image, it wouldn‚Äôt be an adversarially useful image. A less strong test of the hypothesis would be to relax the requirement that there be some well-classified base image</p></li><li><p>Generated or perturbed image not obviously classified by humans, CNNs consistently classify -&gt; when forced, if humans classify in same way at same rate, implied mechanistic similarity. (similar to experiments 3a, 3b)</p><p>In this case, the images <strong>cannot</strong> obviously resemble the classes they are assigned by the CNN, as that would just mean the CNNs correctly learned some abstract representation of the way images look to humans. Such a result is not <strong>un</strong>interesting, it is just the same as finding that CNNs can classify images, and we know that already. To the degree than an image resembles the class that the CNN assigned it, that image is not suitable to test this hypothesis. Another subtlety here is that the humans should have to classify in the same way as the CNNs, ie. choose from a list of all possible categories. Giving additional structure to the humans would require giving the same to the CNNs to make the results comparable.</p><p>There are several implicit hypotheses tested in this paper that are essentially unrelated to the central question of machine/human overlap.</p></li><li><p>Humans are told images were misclassified, choose the misclassification from an array of all possible image classes. If misclassification correctly identified, humans can recognize visual features that drive misclassifications in CNNs. (experiment 5)</p><p>This is a distinct hypothesis from ‚Äòhumans have the same visual processing as CNNs,‚Äô in this case since the human subjects are told there is a misclassification, they are looking not for what they think the image actually is, but for what would have driven the mistake. The interpretation should be that humans are capable of inferring what makes a machine misclassify an image, not that we process images similarly.</p></li><li><p>Humans are given an image class and examples, if they choose the image that was categorized as that class, they can recognize some element of the image class in the adversarial image. (experiment 4)</p><p>This is another separate question ‚Äì in this case the subjects are asked to recognize some feature from the example images in the perturbed images. Their being able to see those features is not indicative that they process the images in the same way as the CNN, but amongst an array of imperfect examples they can see the image that is the most similar to the example images.</p></li></ol><p>The optimal outcome for all of these experiments is</p><ol><li>The subject all categorize with high accuracy - the subjects should all have the same performance as the machine to affirm the hypothesis.</li><li>The images are all categorized with equal accuracy - since the question is about human/machine agreement <em>in general</em>, that overlap should be true of all images. Having images with wildly different accuracy rates is useful to assess the visual features that drive human/machine, but for the same reason points to some specific qualities of the images that make the more and less accurately categorized rather than a general similarity between human/machine overlap. Remember ‚Äì the machines classify <strong>all</strong> of these images incorrectly with a high degree of confidence, so humans should too.</li></ol><h1 id="reanalysis-details">Reanalysis Details</h1><p>Aside from the structure of the hypotheses, I had questions about the data analysis itself. During his presentation I was confused about why the data was reported as it was ‚Äì the main results they report are the % of subjects whose categorization agreed with the machine and % of images where the majority categorization agreed with the machine. It seemed like that analysis would obscure the actual rates of categorization ‚Äì ie. the actual rate of ‚Äúcorrect‚Äù responses grouped by subject and image. The percents of subject and image agreement were also counted just by their mean categorization being above chance rather than being statistically distinguishable from chance (ie. confidence intervals exclude the chance threshold), I will also report those as ‚Äúadjusted accuracies‚Äù using pearson-klopper binomial 95% confidence intervals.</p><p>Because I think this is such a potentially cool line of research I thought I would do the reanalysis myself. Thankfully, the authors released their (very clean!) data. I think the results are quite a bit more subtle than initially reported.</p><h1 id="code-boilerplate">Code Boilerplate</h1><p>We‚Äôll use the following libraries</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">lme4</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">rio</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">binom</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">here</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">caret</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><p>I‚Äôve put the data in a directory in my website structure, ‚Äú/assets/data/adv‚Äù. We‚Äôll load them all into variable names <code class="highlighter-rouge">expt_1</code>, <code class="highlighter-rouge">expt_2</code>, etc. and do some cleanup.</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="c1"># list experiment data files</span><span class="w">
</span><span class="n">experiment_dirs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">list.dirs</span><span class="p">(</span><span class="n">here</span><span class="p">(</span><span class="s1">'assets'</span><span class="p">,</span><span class="w"> </span><span class="s1">'data'</span><span class="p">,</span><span class="w"> </span><span class="s1">'adv'</span><span class="p">),</span><span class="w"> </span><span class="n">full.names</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">recursive</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="c1"># name each dataset according to its number</span><span class="w">
</span><span class="n">experiment_names</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"expt_1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_3a"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_3b"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_5"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_6"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_7"</span><span class="p">)</span><span class="w">

</span><span class="c1"># list the datafiles</span><span class="w">
</span><span class="n">data_files</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">experiment_dirs</span><span class="p">))){</span><span class="w">
  </span><span class="n">data_files</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">list.files</span><span class="p">(</span><span class="n">here</span><span class="p">(</span><span class="s1">'assets'</span><span class="p">,</span><span class="w"> </span><span class="s1">'data'</span><span class="p">,</span><span class="w"> </span><span class="s1">'adv'</span><span class="p">,</span><span class="w"> </span><span class="n">experiment_dirs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="s2">"data"</span><span class="p">),</span><span class="w"> </span><span class="n">full.names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1"># load experiments</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">data_files</span><span class="p">))){</span><span class="w">
  </span><span class="n">assign</span><span class="p">(</span><span class="n">experiment_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w">
         </span><span class="n">as.tbl</span><span class="p">(</span><span class="n">import_list</span><span class="p">(</span><span class="n">data_files</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">$</span><span class="n">Data</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">##########################</span><span class="w">
</span><span class="c1">## clean data</span><span class="w">

</span><span class="c1"># rename columns</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_1</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">11</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_2</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">11</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_3a</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_3b</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_4</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">9</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_allpass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_5</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">9</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w">  </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_6</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">10</span><span class="p">,</span><span class="m">11</span><span class="p">,</span><span class="m">12</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_7</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">10</span><span class="p">,</span><span class="m">11</span><span class="p">,</span><span class="m">12</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">

</span><span class="c1"># retype columns</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">expt_name</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">experiment_names</span><span class="p">){</span><span class="w">
  </span><span class="c1"># use get to refer to the object with its character name not its symbol name</span><span class="w">
  </span><span class="n">xpt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get</span><span class="p">(</span><span class="n">expt_name</span><span class="p">)</span><span class="w">
  
    </span><span class="c1"># subset incomplete subjects</span><span class="w">
  </span><span class="n">xpt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">xpt</span><span class="p">[</span><span class="n">xpt</span><span class="o">$</span><span class="n">complete</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,]</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">"rt_allpass"</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">xpt</span><span class="p">)){</span><span class="w">
    </span><span class="n">xpt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">xpt</span><span class="p">[</span><span class="n">xpt</span><span class="o">$</span><span class="n">rt_allpass</span><span class="o">==</span><span class="kc">TRUE</span><span class="p">,]</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="c1"># first columns present in all dfs</span><span class="w">
  </span><span class="n">xpt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">xpt</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="w">
    </span><span class="n">subject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">subject</span><span class="p">),</span><span class="w">
    </span><span class="n">correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.logical</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
    </span><span class="n">rt_pass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.logical</span><span class="p">(</span><span class="n">rt_pass</span><span class="p">),</span><span class="w">
    </span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.logical</span><span class="p">(</span><span class="n">complete</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
  
  </span><span class="c1"># then specifics</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">"image"</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">xpt</span><span class="p">)){</span><span class="w">
    </span><span class="n">xpt</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">xpt</span><span class="o">$</span><span class="n">image</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">"response"</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">xpt</span><span class="p">)){</span><span class="w">
    </span><span class="n">xpt</span><span class="o">$</span><span class="n">response</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">xpt</span><span class="o">$</span><span class="n">response</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
  

  
  
  </span><span class="c1"># assign back to name</span><span class="w">
  
  </span><span class="n">assign</span><span class="p">(</span><span class="n">expt_name</span><span class="p">,</span><span class="w">
         </span><span class="n">xpt</span><span class="p">)</span><span class="w">
</span><span class="p">}</span></code></pre>

</figure><!-- </details> --><h2 id="summarizing-functions">Summarizing Functions</h2><p>Since so much of the data has the same structure, we‚Äôll write functions to summarize the image responses by image and subject. They‚Äôll return</p><ul><li><code class="highlighter-rouge">n_trials</code> - the number of trials per group</li><li><code class="highlighter-rouge">n_correct</code> - the number of ‚Äúcorrect,‚Äù or matching the categorization of the CNN, trials</li><li><code class="highlighter-rouge">meancx</code> - the proportion of correct answers per group</li><li><code class="highlighter-rouge">cilo</code>, <code class="highlighter-rouge">cihi</code> - the 95% confidence interval around the mean correct.</li></ul><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">summarize_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">data</span><span class="p">){</span><span class="w">

  </span><span class="n">summary_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">meanrt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">rt</span><span class="p">),</span><span class="w">
            </span><span class="n">sdrt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">rt</span><span class="p">),</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                  </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.95</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                  </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.95</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">

  </span><span class="n">summary_image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">summary_image</span><span class="o">$</span><span class="n">image</span><span class="p">,</span><span class="w"> 
                              </span><span class="n">levels</span><span class="o">=</span><span class="n">summary_image</span><span class="o">$</span><span class="n">image</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">summary_image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  
  </span><span class="n">summary_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
              </span><span class="n">meanrt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">rt</span><span class="p">),</span><span class="w">
              </span><span class="n">sdrt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">rt</span><span class="p">),</span><span class="w">
              </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.95</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
              </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.95</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">
  
  </span><span class="n">summary_subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">summary_subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> 
                                     </span><span class="n">levels</span><span class="o">=</span><span class="n">summary_subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">summary_subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  
  </span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">summary_image</span><span class="p">,</span><span class="w">
              </span><span class="s2">"subject"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">summary_subject</span><span class="p">))</span><span class="w">

</span><span class="p">}</span><span class="w">

</span><span class="n">summarize_e4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="p">){</span><span class="w">
  </span><span class="nf">names</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">9</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_allpass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="p">[(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">complete</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">rt_allpass</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">),]</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">subject</span><span class="p">)</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">target</span><span class="p">)</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">response</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">response</span><span class="p">)</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">trialNum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">trialNum</span><span class="p">)</span><span class="w">
  
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
              </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
              </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">
  
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
              </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
              </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">
  
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">trialNum</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
              </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
              </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">
  
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  </span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w">
              </span><span class="s2">"subject"</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w">
              </span><span class="s2">"trial"</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">summarize_e5</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="p">){</span><span class="w">
  
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">n_eight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"8"</span><span class="p">),</span><span class="w">
            </span><span class="n">meaneight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_eight</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="n">n_eight</span><span class="p">,</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                  </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                  </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="n">n_eight</span><span class="p">,</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                  </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                  </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]],</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subject"</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">summarize_6</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="p">){</span><span class="w">
  
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subject"</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="p">))</span><span class="w">
  
</span><span class="p">}</span><span class="w">


</span><span class="n">summarize_7</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="p">){</span><span class="w">
  
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">imageName</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">imageName</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">imageName</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">imageName</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subject"</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="p">))</span><span class="w">
  
</span><span class="p">}</span><span class="w">

</span><span class="c1"># and some convenience functions to make our basic plots</span><span class="w">
</span><span class="n">plot_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">ex_image</span><span class="p">,</span><span class="w"> </span><span class="n">ex_num</span><span class="p">){</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"3a"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3b"</span><span class="p">)){</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"4"</span><span class="p">){</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">8</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"5"</span><span class="p">){</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">9</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"7"</span><span class="p">){</span><span class="w">
    </span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">ex_image</span><span class="o">$</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s2">" - "</span><span class="p">)</span><span class="w">
    </span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">ex_image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="n">g.image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">ex_image</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">()</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y_height</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">paste</span><span class="p">(</span><span class="s2">"Experiment"</span><span class="p">,</span><span class="w"> </span><span class="n">ex_num</span><span class="p">,</span><span class="w"> </span><span class="s2">"- Mean Accuracy of Images"</span><span class="p">),</span><span class="w">
       </span><span class="n">y</span><span class="o">=</span><span class="s2">"Mean accuracy across subjects"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">unit</span><span class="p">(</span><span class="m">14</span><span class="p">,</span><span class="s2">"pt"</span><span class="p">)),</span><span class="w">
        </span><span class="n">axis.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">unit</span><span class="p">(</span><span class="m">20</span><span class="p">,</span><span class="s2">"pt"</span><span class="p">)),</span><span class="w">
    </span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">))</span><span class="w">
  
  </span><span class="nf">return</span><span class="p">(</span><span class="n">g.image</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">plot_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">ex_subject</span><span class="p">,</span><span class="w"> </span><span class="n">ex_num</span><span class="p">){</span><span class="w">
  
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"3a"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3b"</span><span class="p">)){</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"4"</span><span class="p">){</span><span class="w">
    </span><span class="n">y_height</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">8</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"5"</span><span class="p">){</span><span class="w">
    </span><span class="n">y_height</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">9</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="n">g.subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">ex_subject</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">()</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y_height</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">paste</span><span class="p">(</span><span class="s2">"Experiment"</span><span class="p">,</span><span class="w"> </span><span class="n">ex_num</span><span class="p">,</span><span class="w"> </span><span class="s2">"- Mean Accuracy of Subject"</span><span class="p">),</span><span class="w">
       </span><span class="n">y</span><span class="o">=</span><span class="s2">"Mean accuracy across images"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">())</span><span class="w">

  </span><span class="nf">return</span><span class="p">(</span><span class="n">g.subject</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1"># and to compute subject and image accuracies using confidence intervals instead of means</span><span class="w">
</span><span class="n">adjusted_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">ex_image</span><span class="p">,</span><span class="w"> </span><span class="n">ex_subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">0.5</span><span class="p">){</span><span class="w">
  </span><span class="n">ex_img_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">ex_image</span><span class="p">[</span><span class="n">ex_image</span><span class="o">$</span><span class="n">cilo</span><span class="o">&gt;</span><span class="n">level</span><span class="p">,])</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">ex_image</span><span class="p">)</span><span class="w">
  </span><span class="n">ex_subject_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">ex_subject</span><span class="p">[</span><span class="n">ex_subject</span><span class="o">$</span><span class="n">cilo</span><span class="o">&gt;</span><span class="n">level</span><span class="p">,])</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">ex_subject</span><span class="p">)</span><span class="w">

</span><span class="c1"># round for inclusion in the text</span><span class="w">
</span><span class="n">ex_img_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">ex_img_accuracy</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="w">
</span><span class="n">ex_subject_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">ex_subject_accuracy</span><span class="p">,</span><span class="m">3</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="w">

  </span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ex_img_accuracy</span><span class="p">,</span><span class="w">
              </span><span class="n">subject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ex_subject_accuracy</span><span class="p">))</span><span class="w">
</span><span class="p">}</span></code></pre>

</figure><!-- </details> --><h1 id="experiment-1">Experiment 1</h1><p>The first image uses images from <a href="https://arxiv.org/abs/1412.1897">Nguyen A, et al 2014</a>, which were generated using a ‚Äúcompositional pattern-producing network‚Äù that</p><blockquote><p>can produce images that both humans and DNNs can recognize.</p></blockquote><p>Importantly though,</p><blockquote><p>These images were produced on PicBreeder.org, a site where users serve as the fitness function in an evolutionary algorithm by selecting images they like, which become the parents of the next generation.</p></blockquote><p>So using these images may make the results particularly difficult to interpret, as it‚Äôs not clear how aesthetic preference interacts with the preference for recognizable objects. It could be the case that people pick images to preserve in the image generation process that look like real objects, so they aren‚Äôt ‚Äúadversarial‚Äù images, strictly speaking. Indeed, the authors of the image-generation paper note</p><blockquote><p>the generated images do often contain some features of the target class</p></blockquote><p>so a human classifying an image as the same class as a machine might be unsurprising for these images. Since some of the images do indeed resemble the ‚Äòtarget‚Äô classes, those images are unsuitable for assessing the degree to which the human visual system makes the same ‚Äòerrors‚Äô as machine vision.</p><p>The subjects in this task saw one of 48 ‚Äúfooling images,‚Äù and were presented with the ‚Äúcorrect‚Äù label and a randomly selected label from the other 47 images. The primary result the report for this experiment is that</p><blockquote><p>98% of observers chose the machine‚Äôs label at above-chance rates. [‚Ä¶] Additionally, 94% of the images showed above-chance human-machine agreement</p></blockquote><p>Reanalyzing by image and subject, however‚Ä¶</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="c1"># summarize the data and expand list to new</span><span class="w">
</span><span class="n">sum_1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_data</span><span class="p">(</span><span class="n">expt_1</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sum_1</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sum_1</span><span class="o">$</span><span class="n">subject</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e1_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"1"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e1_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-1-1.png" alt="plot of chunk unnamed-chunk-1" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e1_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"1"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e1_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/expt_1_2-1.png" alt="plot of chunk expt_1_2" /></p><p>So far so good, although if we use the binomial confidence intervals rather than just the mean response rate ‚Äì what I‚Äôll call corrected accuracies ‚Äì we get a more valid description of above-chance accuracy</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">subject</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><p>Only 85.4% of images were categorized above chance, and 81.2% of subjects did, as opposed to the reported 94% and 98%, respectively.</p><h1 id="experiment-2---1st-vs-2nd-best-labels">Experiment 2 - 1st vs 2nd best labels</h1><p>Of course, not all foil labels are created equal, so a more conservative test for human/machine overlap is to compare the highest and second highest labels predicted by the machine.</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">summary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_data</span><span class="p">(</span><span class="n">expt_2</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">summary</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">summary</span><span class="o">$</span><span class="n">subject</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e2_img</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"2"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e2_img</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-2-1.png" alt="plot of chunk unnamed-chunk-2" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e2_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"2"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e2_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-3-1.png" alt="plot of chunk unnamed-chunk-3" /></p><p>This looks much worse, and the corrected accuracies reflect that</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">subject</span><span class="p">)</span><span class="w">

</span><span class="n">total_acc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">expt_2</span><span class="p">[</span><span class="n">expt_2</span><span class="o">$</span><span class="n">correct</span><span class="o">==</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,])</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">expt_2</span><span class="p">)</span><span class="w">
</span><span class="n">total_acc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">total_acc</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span></code></pre>

</figure><!-- </details> --><p>Only 54.2% of images and 31.3% of subjects classified above chance, as opposed to the reported 71% and 91%, respectively.</p><p>Collapsing across all images and subjects, only 60.6% of responses agreed with the top category of the CNN.</p><p>We can see the accuracy-inflating strength of having bad foils by comparing experiment 1 vs 2. Images whose classifications remained high in experiment 2 are robust to their next-best label, while those that are significantly worse in experiment 2 are vulnerable.</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">left_join</span><span class="p">(</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="o">=</span><span class="s2">"image"</span><span class="p">)</span></code></pre>

</figure><figure class="highlight">

<pre><code class="language-text" data-lang="text">## Warning: Column `image` joining factors with different levels, coercing to
## character vector</code></pre>

</figure><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="o">$</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="o">$</span><span class="n">image</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="o">$</span><span class="n">meancx.x</span><span class="p">)])</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo.x</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi.x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx.x</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">()</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo.y</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi.y</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx.y</span><span class="p">),</span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Experiment 1 vs Experiment 2 - Mean Accuracy of Images"</span><span class="p">,</span><span class="w">
       </span><span class="n">y</span><span class="o">=</span><span class="s2">"Mean accuracy across subjects"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">))</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-6-1.png" alt="plot of chunk unnamed-chunk-6" /></p><h1 id="experiments-3a-and-3b">Experiments 3a and 3b</h1><p>Experiments 3a and 3b presented all possible labels instead of two. 3a was the ‚Äúmachine theory of mind‚Äù task, and 3b asked subjects to rate what <em>they</em> thought the images were. First, the overall summaries of 3a</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">3</span><span class="n">a_summary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_data</span><span class="p">(</span><span class="n">expt_3a</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">a_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">a_summary</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">a_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">a_summary</span><span class="o">$</span><span class="n">subject</span><span class="w">


</span><span class="n">e</span><span class="m">3</span><span class="n">b_summary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_data</span><span class="p">(</span><span class="n">expt_3b</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">b_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">b_summary</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">b_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">b_summary</span><span class="o">$</span><span class="n">subject</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e3a_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">a_image</span><span class="p">,</span><span class="w"> </span><span class="s2">"3a"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e3a_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-8-1.png" alt="plot of chunk unnamed-chunk-8" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e3a_sub</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">a_subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"3a"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e3a_sub</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-9-1.png" alt="plot of chunk unnamed-chunk-9" /></p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">3</span><span class="n">a_acc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">a_image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">a_subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><p>Again, only 60.4% of images and 47.4% of subjects were above chance accuracy of 1/48, as opposed to the reported 79% and 88%, respectively. Experiment 3b has qualitatively the same results, but their interpretation doesn‚Äôt necessarily follow from the data:</p><blockquote><p>These results suggest that the humans‚Äôability to decipher adversarial images doesn‚Äôt depend on the peculiarities of our machine-theory-of-mind task, and that human performance reflects a more general agreement with machine (mis)classification.</p></blockquote><p>There are actually two degenerate interpretations here: either human performance is the same as machine performance, or the subjects were just rating what they thought the images were in all tasks. No further differentiating experiments were done to tease these interpretations apart, so this point is a wash.</p><p>Further, if one looks at the most accurately categorized images‚Ä¶</p><p><img src="/blog/assets/images/chainlink_fence.png" alt="chainlink fence" /></p><blockquote><p>Chainlink fence</p></blockquote><p><img src="/blog/assets/images/spotlight.png" alt="spotlight" /></p><blockquote><p>Spotlight</p></blockquote><p><img src="/blog/assets/images/monarch_butterfly.png" alt="monarch butterfly" /></p><blockquote><p>Monarch Butterfly</p></blockquote><p>‚Ä¶ we can easily see why they were. Remember the argument here is that these are supposedly adversarial images that fool a classifier. A finding that humans and image classification algorithms similarly categorize things that really do look like those categories is unremarkable.</p><h1 id="experiment-4---static-images">Experiment 4 - Static images</h1><p>Experiment 4 uses ‚Äústatic‚Äù images (from the same source paper), but also changes the task in a meaningful way. Rather than asking what category an image was, the subject is presented with the category and a set of representative images and asked ‚Äúwhich image has this category?‚Äù</p><p><img src="/blog/assets/images/static_task.png" alt="static image task" /></p><p>This experiment only has 8 images in the set of static images, and each is presented in every trial. The authors note that</p><blockquote><p>upon very close inspection, you may notice a small, often central,‚Äòobject‚Äô within each image.</p></blockquote><p>and they are actually quite pronounced. Even if the central ‚Äúobjects‚Äù don‚Äôt look recognizably like the categorized object, they are distinguishable that subjects should be able to recognize them between trials. Since the subjects are asked to choose one category for each of the images, it seems possible for them to use that information to exclude images from later trials. In other words, the trials are not independent. This is reflected in the positive slope of accuracy over trial number</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_e4</span><span class="p">(</span><span class="n">expt_4</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">subject</span><span class="w">
</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">trial</span><span class="w">

</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">8</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">trialNum</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_smooth</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">"lm"</span><span class="p">)</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-12-1.png" alt="plot of chunk unnamed-chunk-12" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">lm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lm</span><span class="p">(</span><span class="n">meancx</span><span class="o">~</span><span class="n">trialNum</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="p">)</span><span class="w">
</span><span class="n">summary</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">lm</span><span class="p">)</span></code></pre>

</figure><figure class="highlight">

<pre><code class="language-text" data-lang="text">## 
## Call:
## lm(formula = meancx ~ trialNum, data = e4_trial)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.040277 -0.022918 -0.000463  0.023489  0.044197 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.233034   0.021472  10.853 3.63e-05 ***
## trialNum    0.016182   0.005133   3.153   0.0197 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.03326 on 6 degrees of freedom
## Multiple R-squared:  0.6236,	Adjusted R-squared:  0.5608 
## F-statistic: 9.939 on 1 and 6 DF,  p-value: 0.01975</code></pre>

</figure><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e4_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"4"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e4_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-14-1.png" alt="plot of chunk unnamed-chunk-14" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e4_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"4"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e4_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-15-1.png" alt="plot of chunk unnamed-chunk-15" /></p><p>Again, the corrected accuracies are much lower than they report, accounting for uncertainty, only 75% of images and 8.4% of subjects had accuracies above chance, rather than the reported 100% and 81%, respectively. This is exceptionally troubling for their interpretation of their results, as it is <em>subject</em> accuracy that matters, not <em>image</em> accuracy.</p><h1 id="experiment-5---digit-classification">Experiment 5 - Digit classification</h1><p>In this experiment, perturbed MNIST digits are given, and the subjects are told they were miscategorized ‚Äì ie. choose the mistaken digit NOT the one that it looks like.</p><p>As a first pass, things look ok‚Ä¶</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_e5</span><span class="p">(</span><span class="n">expt_5</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">subject</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w">

</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">9</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e5_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"5"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e5_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-17-1.png" alt="plot of chunk unnamed-chunk-17" /></p><p>But something is off with the confusion matrix</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">expt_5</span><span class="o">$</span><span class="n">response</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">expt_5</span><span class="o">$</span><span class="n">response</span><span class="p">)</span><span class="w">
</span><span class="n">expt_5</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">expt_5</span><span class="o">$</span><span class="n">target</span><span class="p">)</span><span class="w">
</span><span class="n">cm5</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">caret</span><span class="o">::</span><span class="n">confusionMatrix</span><span class="p">(</span><span class="n">expt_5</span><span class="o">$</span><span class="n">response</span><span class="p">,</span><span class="w"> </span><span class="n">expt_5</span><span class="o">$</span><span class="n">target</span><span class="p">)</span><span class="w">
</span><span class="n">cm5</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reshape2</span><span class="o">::</span><span class="n">melt</span><span class="p">(</span><span class="n">cm5</span><span class="o">$</span><span class="n">table</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">cm5</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">as.factor</span><span class="p">(</span><span class="n">Reference</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">as.factor</span><span class="p">(</span><span class="n">Prediction</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="n">value</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_tile</span><span class="p">()</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-19-1.png" alt="plot of chunk unnamed-chunk-19" /></p><p>It looks like everyone just said everything was an 8. In the plot below, the rate of ‚Äú8‚Äù responses is colored in red.</p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">()</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo8</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi8</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meaneight</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Experiment 5 - black = mean correct responses, red = mean 8 responses"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">))</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-20-1.png" alt="plot of chunk unnamed-chunk-20" /></p><p>The interpretation of this experiment given in the paper is straightforwardly inaccurate. Most subjects did <em>not</em> agree with the machine classification, they just classified everything as an 8. The ‚Äúabove chance accuracy‚Äù of the target labels was only due to the very low rates of other digit responses.</p><p>This is reflected in the subject accuracy, where only 15.1% of subjects had accuracies significantly better than chance.</p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e5_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"5"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e5_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-21-1.png" alt="plot of chunk unnamed-chunk-21" /></p><h1 id="experiment-6">Experiment 6</h1><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_6</span><span class="p">(</span><span class="n">expt_6</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">subject</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w">

</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">0.5</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e6_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"6"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e6_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-23-1.png" alt="plot of chunk unnamed-chunk-23" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e6_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"6"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e6_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-24-1.png" alt="plot of chunk unnamed-chunk-24" /></p><p>These images have surprisingly high accuracy! At last! This one seems solid.</p><p>However, the image perturbation introduces small images <em>that look exactly like the target category</em> into the images. Some examples:</p><p>The ‚Äúrock beauty‚Äù fish with the highest accuracy: <img src="/blog/assets/images/perturb_fish.png" alt="perturbed fish" /></p><p>and the milk jug <img src="/blog/assets/images/perturb_milk.png" alt="perturbed milk" /></p><p>This is especially problematic since the task was to choose one of two labels ‚Äì as was the case in experiment 1 as compared to 2, even when the primary label isn‚Äôt immediately obvious, if the foil label is significantly worse the categorization becomes trivial.</p><h1 id="experiment-7">Experiment 7</h1><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_7</span><span class="p">(</span><span class="n">expt_7</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">subject</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">imageName</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w">

</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">total</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">expt_7</span><span class="o">$</span><span class="n">correct</span><span class="p">)</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">expt_7</span><span class="p">),</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="o">*</span><span class="m">100</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e7_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"7"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e7_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-26-1.png" alt="plot of chunk unnamed-chunk-26" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e7_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"7"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e7_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-27-1.png" alt="plot of chunk unnamed-chunk-27" /></p><p>Again, only 44.3% of images and 16.3% of subjects had accuracy significantly above chance, as opposed to the reported 78% of images and 83% of subjects. Overall, across all images and subjects, the total accuracy was 58.9%.</p><p>The image synthesis technique is tuned to minimize perceptual perturbations, but does impart a recognizable texture to the objects in the image. This was especially problematic in examples where the original image and the target class were semantically related, or had a similar texture, for example</p><p><img src="/blog/assets/images/dog_191_1.png" alt="dog 191_1" /></p><p>A dog_191, whose adversarial target was ‚Äúairedale‚Äù</p><p>In others, the texture was so obvious that it is no longer visually undetectable.</p><p><img src="/blog/assets/images/dog_63_1.png" alt="dog 61_1" /> Dog 63, whose adversarial target was ‚Äúindian cobra.‚Äù</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">acc_total</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">expt_7</span><span class="o">$</span><span class="n">correct</span><span class="p">)</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">expt_7</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><h1 id="overall-summary">Overall summary</h1><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meanrt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meanrt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meanrt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meanrt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">

</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">sub</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">[,</span><span class="o">-</span><span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">)]</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">a_accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">a_image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">a_subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">b_accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">b_image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">b_subject</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="p">)</span><span class="w">
</span><span class="n">all_images</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">bind_rows</span><span class="p">(</span><span class="s2">"expt_1"</span><span class="o">=</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w"> 
                    </span><span class="s2">"expt_2"</span><span class="o">=</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w"> 
                    </span><span class="s2">"expt_3a"</span><span class="o">=</span><span class="n">e</span><span class="m">3</span><span class="n">a_accs</span><span class="p">,</span><span class="w"> 
                    </span><span class="s2">"expt_3b"</span><span class="o">=</span><span class="n">e</span><span class="m">3</span><span class="n">b_accs</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"expt_4"</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"expt_5"</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"expt_6"</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"expt_7"</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w">
                    </span><span class="n">.id</span><span class="o">=</span><span class="s2">"expt"</span><span class="p">)</span><span class="w">

</span><span class="n">all_images</span><span class="o">$</span><span class="n">reported_img</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">     </span><span class="nf">c</span><span class="p">(</span><span class="m">94</span><span class="p">,</span><span class="w"> </span><span class="m">71</span><span class="p">,</span><span class="w"> </span><span class="m">79</span><span class="p">,</span><span class="w"> </span><span class="m">81</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">73</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">78</span><span class="p">)</span><span class="w">
</span><span class="n">all_images</span><span class="o">$</span><span class="n">reported_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">98</span><span class="p">,</span><span class="w"> </span><span class="m">91</span><span class="p">,</span><span class="w"> </span><span class="m">88</span><span class="p">,</span><span class="w"> </span><span class="m">90</span><span class="p">,</span><span class="w"> </span><span class="m">81</span><span class="p">,</span><span class="w">  </span><span class="m">89</span><span class="p">,</span><span class="w"> </span><span class="m">87</span><span class="p">,</span><span class="w">  </span><span class="m">83</span><span class="p">)</span><span class="w">

</span><span class="n">all_im_melt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reshape2</span><span class="o">::</span><span class="n">melt</span><span class="p">(</span><span class="n">all_images</span><span class="p">,</span><span class="w"> </span><span class="n">measure.vars</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"image"</span><span class="p">,</span><span class="w"> </span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reported_img"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reported_subject"</span><span class="p">))</span><span class="w">

</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"image"</span><span class="w">
</span><span class="n">all_im_melt</span><span class="p">[</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">variable</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reported_subject"</span><span class="p">),]</span><span class="o">$</span><span class="n">type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"subject"</span><span class="w">

</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"adjusted"</span><span class="w">
</span><span class="n">all_im_melt</span><span class="p">[</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">variable</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"reported_subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reported_img"</span><span class="p">),]</span><span class="o">$</span><span class="n">which</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"reported"</span><span class="w">

</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">expt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">expt</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">experiment_names</span><span class="p">)</span><span class="w">
</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"image"</span><span class="p">,</span><span class="w"> </span><span class="s2">"subject"</span><span class="p">))</span><span class="w">
</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"reported"</span><span class="p">,</span><span class="w"> </span><span class="s2">"adjusted"</span><span class="p">))</span><span class="w">

</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which_type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which</span><span class="p">)</span><span class="w">
</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which_type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which_type</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"image reported"</span><span class="p">,</span><span class="w"> </span><span class="s2">"subject reported"</span><span class="p">,</span><span class="w"> </span><span class="s2">"image adjusted"</span><span class="p">,</span><span class="w"> </span><span class="s2">"subject adjusted"</span><span class="p">))</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">all_im_melt</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">expt</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">value</span><span class="p">,</span><span class="w"> 
                        </span><span class="n">fill</span><span class="o">=</span><span class="n">which_type</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_col</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"dodge"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_brewer</span><span class="p">(</span><span class="n">palette</span><span class="o">=</span><span class="s2">"Paired"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">))</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-30-1.png" alt="plot of chunk unnamed-chunk-30" /></p></div><!--<div class="col-md-3 hidden-sm"> --><div class="toc-container section-padding hidden-sm"><div class="sticky-top post-toc markdown-class"> <!--<h4>Contents</h4>--><ul class="section-nav"><li class="toc-entry toc-h1"><a href="#overview">Overview</a></li><li class="toc-entry toc-h1"><a href="#clarifying-hypotheses">Clarifying Hypotheses</a></li><li class="toc-entry toc-h1"><a href="#reanalysis-details">Reanalysis Details</a></li><li class="toc-entry toc-h1"><a href="#code-boilerplate">Code Boilerplate</a><ul><li class="toc-entry toc-h2"><a href="#summarizing-functions">Summarizing Functions</a></li></ul></li><li class="toc-entry toc-h1"><a href="#experiment-1">Experiment 1</a></li><li class="toc-entry toc-h1"><a href="#experiment-2---1st-vs-2nd-best-labels">Experiment 2 - 1st vs 2nd best labels</a></li><li class="toc-entry toc-h1"><a href="#experiments-3a-and-3b">Experiments 3a and 3b</a></li><li class="toc-entry toc-h1"><a href="#experiment-4---static-images">Experiment 4 - Static images</a></li><li class="toc-entry toc-h1"><a href="#experiment-5---digit-classification">Experiment 5 - Digit classification</a></li><li class="toc-entry toc-h1"><a href="#experiment-6">Experiment 6</a></li><li class="toc-entry toc-h1"><a href="#experiment-7">Experiment 7</a></li><li class="toc-entry toc-h1"><a href="#overall-summary">Overall summary</a></li></ul></div></div></div><div class="row"><ul class="post__social"><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-facebook"></i></a></li><li><a href="https://twitter.com/intent/tweet?&text=An Adversarial (re)Analysis of Zhou/Firestone 2019+https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/+by+Jonny Saunders" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://plus.google.com/share?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-google-plus"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?mini=true&source=An Adversarial (re)Analysis of Zhou/Firestone 2019&summary=Reanalyzing Zhou & Firestone's adversarial image experiments&url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="https://www.stumbleupon.com/badge/?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-stumbleupon"></i></a></li><li><a href="https://www.reddit.com/submit?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-reddit-alien"></i></a></li><li><a href="https://www.tumblr.com/share/link?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-tumblr"></i></a></li><li><a href="https://www.pinterest.com/pin/create/link/?description=Reanalyzing Zhou & Firestone's adversarial image experiments&media=https://jon-e.net/blog/blog/assets/images/zhou_header.png&url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-pinterest"></i></a></li></ul></div><!--<ul class="post__social"><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-facebook"></i></a></li><li><a href="https://twitter.com/intent/tweet?&text=An Adversarial (re)Analysis of Zhou/Firestone 2019+https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/+by+Jonny Saunders" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://plus.google.com/share?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-google-plus"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?mini=true&source=An Adversarial (re)Analysis of Zhou/Firestone 2019&summary=Reanalyzing Zhou & Firestone's adversarial image experiments&url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="https://www.stumbleupon.com/badge/?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-stumbleupon"></i></a></li><li><a href="https://www.reddit.com/submit?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-reddit-alien"></i></a></li><li><a href="https://www.tumblr.com/share/link?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-tumblr"></i></a></li><li><a href="https://www.pinterest.com/pin/create/link/?description=Reanalyzing Zhou & Firestone's adversarial image experiments&media=https://jon-e.net/blog/blog/assets/images/zhou_header.png&url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-pinterest"></i></a></li></ul>--> <!--</div>--> <!--</div>--> <!--<div class="post__content section-padding"><div class="grid"><div id="markdown" itemprop="articleBody"><p>This post is a reanalysis of Zhenglong Zhou and Chaz Firestone‚Äôs paper ‚ÄúHumans can deciper adversarial images,‚Äù so let‚Äôs get some links out of the way</p><ul><li><strong>Paper</strong> - Zhou Z, Firestone C. <a href="https://www.nature.com/articles/s41467-019-08931-6">Humans can deciper adversarial images</a>. <em>Nature Communications</em> 10(1):1334 p.2041-1723, DOI:10.1038/s41467-019-08931-6</li><li><a href="https://arxiv.org/abs/1809.04120"><strong>Preprint</strong></a></li><li><a href="https://osf.io/uknbh/"><strong>Data and Code on OSF</strong></a></li></ul><h1 id="overview">Overview</h1><p>Chaz Firestone came and presented this data at the UO‚Äôs cognitive neuroscience seminar series this winter just before the paper came out. The idea is compelling: Convolutional neural nets trained to classify images are vulnerable to adversarial attacks where images can be manipulated or synthesized to trigger a specific categorization.</p><p>On their face, these adversarial images highlight the dramatic differences between the human/mammalian visual system ‚Äì the types of things that fool us are very different than tactically adding static throughout an image. However if there were any overlap between the types of adversarial image manipulations that fool us and fool CNNs, they argue it would point to a <em>possible</em> mechanistic overlap.</p><p>They use two types of adversarial images:</p><blockquote><p><strong>Fooling images</strong> are otherwise meaningless patterns that are classified as familiar objects by a machine-vision system.</p></blockquote><p><img src="/blog/assets/images/fooling_image.png" alt="o ya u got me" /> <em>ya fooled me doc</em></p><p>and</p><blockquote><p><strong>Perturbed images</strong> are images that would normally be classified accurately and straightforwardly [‚Ä¶] but that are perturbed only slightly to produce a completely different classification by the machine</p></blockquote><p><img src="/blog/assets/images/perturbed_image.png" alt="youch i am tricked!" /> <em>youch wat trickery!</em></p><p>They present 8 experiments with 5 image sets that mostly ask human subjects to guess what a computer would classify the images as ‚Äì what they call ‚Äúmachine theory of mind‚Äù ‚Äì although the degree to which that is different than just having people classify images is ambiguous in their data.</p><h1 id="clarifying-hypotheses">Clarifying Hypotheses</h1><p>There seems to be an abnormally high airgap between data and interpretation here that I think is worthy of careful handling. The ultimate motivation here is to detect some similarity between CNNs and mammalian/human visual systems, and since CNNs seem to be vulnerable to adversarially manipulated images, if there is mechanistic overlap humans should be too. The authors aim to fill the empirical gap where, according to them, no one has actually tested whether humans misclassify these images</p><blockquote><p>A primary factor that makes adversarial images so intriguing is the intuitive assumption that a human would not classify the image as the machine does. (Indeed, this is part of what makes animage‚Äúadversarial‚Äùin thefirst place, though that definition is notyet fully settled.) However, surprisingly little work has actively explored this assumption by testing human performance on such images, even though it is often asserted that adversarial images are ‚Äútotally unrecognizable to human eyes‚Äù</p></blockquote><p>There are a number of <em>very similar</em> hypotheses and results that are possible here, we should delineate between them.</p><p>The most straightforward test of a hypothesis would be:</p><ol><li><p>Base image, well classified by humans and CNNs -&gt; Perturbed image, CNNs consistent misclassify -&gt; If humans misclassify in the same way and at same rate, implied mechanistic similarity.</p><p>A critical component of this is that the image is <em>mis</em>classified according to humans, or classified in a way that is not ‚Äúwhat is looks like.‚Äù There is a tautology that makes this experiment impossible (as the authors note) - if the adversarially manipulated image didn‚Äôt still ‚Äúlook like‚Äù the base image, it wouldn‚Äôt be an adversarially useful image. A less strong test of the hypothesis would be to relax the requirement that there be some well-classified base image</p></li><li><p>Generated or perturbed image not obviously classified by humans, CNNs consistently classify -&gt; when forced, if humans classify in same way at same rate, implied mechanistic similarity. (similar to experiments 3a, 3b)</p><p>In this case, the images <strong>cannot</strong> obviously resemble the classes they are assigned by the CNN, as that would just mean the CNNs correctly learned some abstract representation of the way images look to humans. Such a result is not <strong>un</strong>interesting, it is just the same as finding that CNNs can classify images, and we know that already. To the degree than an image resembles the class that the CNN assigned it, that image is not suitable to test this hypothesis. Another subtlety here is that the humans should have to classify in the same way as the CNNs, ie. choose from a list of all possible categories. Giving additional structure to the humans would require giving the same to the CNNs to make the results comparable.</p><p>There are several implicit hypotheses tested in this paper that are essentially unrelated to the central question of machine/human overlap.</p></li><li><p>Humans are told images were misclassified, choose the misclassification from an array of all possible image classes. If misclassification correctly identified, humans can recognize visual features that drive misclassifications in CNNs. (experiment 5)</p><p>This is a distinct hypothesis from ‚Äòhumans have the same visual processing as CNNs,‚Äô in this case since the human subjects are told there is a misclassification, they are looking not for what they think the image actually is, but for what would have driven the mistake. The interpretation should be that humans are capable of inferring what makes a machine misclassify an image, not that we process images similarly.</p></li><li><p>Humans are given an image class and examples, if they choose the image that was categorized as that class, they can recognize some element of the image class in the adversarial image. (experiment 4)</p><p>This is another separate question ‚Äì in this case the subjects are asked to recognize some feature from the example images in the perturbed images. Their being able to see those features is not indicative that they process the images in the same way as the CNN, but amongst an array of imperfect examples they can see the image that is the most similar to the example images.</p></li></ol><p>The optimal outcome for all of these experiments is</p><ol><li>The subject all categorize with high accuracy - the subjects should all have the same performance as the machine to affirm the hypothesis.</li><li>The images are all categorized with equal accuracy - since the question is about human/machine agreement <em>in general</em>, that overlap should be true of all images. Having images with wildly different accuracy rates is useful to assess the visual features that drive human/machine, but for the same reason points to some specific qualities of the images that make the more and less accurately categorized rather than a general similarity between human/machine overlap. Remember ‚Äì the machines classify <strong>all</strong> of these images incorrectly with a high degree of confidence, so humans should too.</li></ol><h1 id="reanalysis-details">Reanalysis Details</h1><p>Aside from the structure of the hypotheses, I had questions about the data analysis itself. During his presentation I was confused about why the data was reported as it was ‚Äì the main results they report are the % of subjects whose categorization agreed with the machine and % of images where the majority categorization agreed with the machine. It seemed like that analysis would obscure the actual rates of categorization ‚Äì ie. the actual rate of ‚Äúcorrect‚Äù responses grouped by subject and image. The percents of subject and image agreement were also counted just by their mean categorization being above chance rather than being statistically distinguishable from chance (ie. confidence intervals exclude the chance threshold), I will also report those as ‚Äúadjusted accuracies‚Äù using pearson-klopper binomial 95% confidence intervals.</p><p>Because I think this is such a potentially cool line of research I thought I would do the reanalysis myself. Thankfully, the authors released their (very clean!) data. I think the results are quite a bit more subtle than initially reported.</p><h1 id="code-boilerplate">Code Boilerplate</h1><p>We‚Äôll use the following libraries</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">lme4</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">rio</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">binom</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">here</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">caret</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><p>I‚Äôve put the data in a directory in my website structure, ‚Äú/assets/data/adv‚Äù. We‚Äôll load them all into variable names <code class="highlighter-rouge">expt_1</code>, <code class="highlighter-rouge">expt_2</code>, etc. and do some cleanup.</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="c1"># list experiment data files</span><span class="w">
</span><span class="n">experiment_dirs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">list.dirs</span><span class="p">(</span><span class="n">here</span><span class="p">(</span><span class="s1">'assets'</span><span class="p">,</span><span class="w"> </span><span class="s1">'data'</span><span class="p">,</span><span class="w"> </span><span class="s1">'adv'</span><span class="p">),</span><span class="w"> </span><span class="n">full.names</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">recursive</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="c1"># name each dataset according to its number</span><span class="w">
</span><span class="n">experiment_names</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"expt_1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_3a"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_3b"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_5"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_6"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expt_7"</span><span class="p">)</span><span class="w">

</span><span class="c1"># list the datafiles</span><span class="w">
</span><span class="n">data_files</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">experiment_dirs</span><span class="p">))){</span><span class="w">
  </span><span class="n">data_files</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">list.files</span><span class="p">(</span><span class="n">here</span><span class="p">(</span><span class="s1">'assets'</span><span class="p">,</span><span class="w"> </span><span class="s1">'data'</span><span class="p">,</span><span class="w"> </span><span class="s1">'adv'</span><span class="p">,</span><span class="w"> </span><span class="n">experiment_dirs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="s2">"data"</span><span class="p">),</span><span class="w"> </span><span class="n">full.names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1"># load experiments</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">data_files</span><span class="p">))){</span><span class="w">
  </span><span class="n">assign</span><span class="p">(</span><span class="n">experiment_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w">
         </span><span class="n">as.tbl</span><span class="p">(</span><span class="n">import_list</span><span class="p">(</span><span class="n">data_files</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">$</span><span class="n">Data</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">##########################</span><span class="w">
</span><span class="c1">## clean data</span><span class="w">

</span><span class="c1"># rename columns</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_1</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">11</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_2</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">11</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_3a</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_3b</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_4</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">9</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_allpass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_5</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">9</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w">  </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_6</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">10</span><span class="p">,</span><span class="m">11</span><span class="p">,</span><span class="m">12</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">expt_7</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">10</span><span class="p">,</span><span class="m">11</span><span class="p">,</span><span class="m">12</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">

</span><span class="c1"># retype columns</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">expt_name</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">experiment_names</span><span class="p">){</span><span class="w">
  </span><span class="c1"># use get to refer to the object with its character name not its symbol name</span><span class="w">
  </span><span class="n">xpt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get</span><span class="p">(</span><span class="n">expt_name</span><span class="p">)</span><span class="w">
  
    </span><span class="c1"># subset incomplete subjects</span><span class="w">
  </span><span class="n">xpt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">xpt</span><span class="p">[</span><span class="n">xpt</span><span class="o">$</span><span class="n">complete</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,]</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">"rt_allpass"</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">xpt</span><span class="p">)){</span><span class="w">
    </span><span class="n">xpt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">xpt</span><span class="p">[</span><span class="n">xpt</span><span class="o">$</span><span class="n">rt_allpass</span><span class="o">==</span><span class="kc">TRUE</span><span class="p">,]</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="c1"># first columns present in all dfs</span><span class="w">
  </span><span class="n">xpt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">xpt</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="w">
    </span><span class="n">subject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">subject</span><span class="p">),</span><span class="w">
    </span><span class="n">correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.logical</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
    </span><span class="n">rt_pass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.logical</span><span class="p">(</span><span class="n">rt_pass</span><span class="p">),</span><span class="w">
    </span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.logical</span><span class="p">(</span><span class="n">complete</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
  
  </span><span class="c1"># then specifics</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">"image"</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">xpt</span><span class="p">)){</span><span class="w">
    </span><span class="n">xpt</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">xpt</span><span class="o">$</span><span class="n">image</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">"response"</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">xpt</span><span class="p">)){</span><span class="w">
    </span><span class="n">xpt</span><span class="o">$</span><span class="n">response</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">xpt</span><span class="o">$</span><span class="n">response</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
  

  
  
  </span><span class="c1"># assign back to name</span><span class="w">
  
  </span><span class="n">assign</span><span class="p">(</span><span class="n">expt_name</span><span class="p">,</span><span class="w">
         </span><span class="n">xpt</span><span class="p">)</span><span class="w">
</span><span class="p">}</span></code></pre>

</figure><!-- </details> --><h2 id="summarizing-functions">Summarizing Functions</h2><p>Since so much of the data has the same structure, we‚Äôll write functions to summarize the image responses by image and subject. They‚Äôll return</p><ul><li><code class="highlighter-rouge">n_trials</code> - the number of trials per group</li><li><code class="highlighter-rouge">n_correct</code> - the number of ‚Äúcorrect,‚Äù or matching the categorization of the CNN, trials</li><li><code class="highlighter-rouge">meancx</code> - the proportion of correct answers per group</li><li><code class="highlighter-rouge">cilo</code>, <code class="highlighter-rouge">cihi</code> - the 95% confidence interval around the mean correct.</li></ul><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">summarize_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">data</span><span class="p">){</span><span class="w">

  </span><span class="n">summary_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">meanrt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">rt</span><span class="p">),</span><span class="w">
            </span><span class="n">sdrt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">rt</span><span class="p">),</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                  </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.95</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                  </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.95</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">

  </span><span class="n">summary_image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">summary_image</span><span class="o">$</span><span class="n">image</span><span class="p">,</span><span class="w"> 
                              </span><span class="n">levels</span><span class="o">=</span><span class="n">summary_image</span><span class="o">$</span><span class="n">image</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">summary_image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  
  </span><span class="n">summary_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
              </span><span class="n">meanrt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">rt</span><span class="p">),</span><span class="w">
              </span><span class="n">sdrt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">rt</span><span class="p">),</span><span class="w">
              </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.95</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
              </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.95</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">
  
  </span><span class="n">summary_subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">summary_subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> 
                                     </span><span class="n">levels</span><span class="o">=</span><span class="n">summary_subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">summary_subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  
  </span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">summary_image</span><span class="p">,</span><span class="w">
              </span><span class="s2">"subject"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">summary_subject</span><span class="p">))</span><span class="w">

</span><span class="p">}</span><span class="w">

</span><span class="n">summarize_e4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="p">){</span><span class="w">
  </span><span class="nf">names</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="p">)[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">9</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"correct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_pass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rt_allpass"</span><span class="p">,</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">)</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="p">[(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">complete</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">rt_allpass</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">),]</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">subject</span><span class="p">)</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">target</span><span class="p">)</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">response</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">response</span><span class="p">)</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">trialNum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="o">$</span><span class="n">trialNum</span><span class="p">)</span><span class="w">
  
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
              </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
              </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">
  
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
              </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
              </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">
  
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">trialNum</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
              </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
              </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
              </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                   </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                   </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">
  
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w">
  </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  </span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w">
              </span><span class="s2">"subject"</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w">
              </span><span class="s2">"trial"</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">summarize_e5</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="p">){</span><span class="w">
  
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">n_eight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"8"</span><span class="p">),</span><span class="w">
            </span><span class="n">meaneight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_eight</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="n">n_eight</span><span class="p">,</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                  </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                  </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="n">n_eight</span><span class="p">,</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                  </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                  </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]],</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subject"</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">summarize_6</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="p">){</span><span class="w">
  
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subject"</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="p">))</span><span class="w">
  
</span><span class="p">}</span><span class="w">


</span><span class="n">summarize_7</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="p">){</span><span class="w">
  
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">imageName</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">n_correct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
            </span><span class="n">meancx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_correct</span><span class="o">/</span><span class="n">n_trials</span><span class="p">,</span><span class="w">
            </span><span class="n">cilo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">5</span><span class="p">]],</span><span class="w">
            </span><span class="n">cihi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binom.confint</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="nf">length</span><span class="p">(</span><span class="n">correct</span><span class="p">),</span><span class="w">
                                 </span><span class="n">conf.level</span><span class="o">=</span><span class="m">0.99</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s2">"exact"</span><span class="p">,</span><span class="w">
                                 </span><span class="n">alternative</span><span class="o">=</span><span class="s2">"greater"</span><span class="p">)[[</span><span class="m">6</span><span class="p">]])</span><span class="w">


</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">imageName</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">imageName</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">imageName</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">subject</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
</span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="s2">"image"</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subject"</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="p">))</span><span class="w">
  
</span><span class="p">}</span><span class="w">

</span><span class="c1"># and some convenience functions to make our basic plots</span><span class="w">
</span><span class="n">plot_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">ex_image</span><span class="p">,</span><span class="w"> </span><span class="n">ex_num</span><span class="p">){</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"3a"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3b"</span><span class="p">)){</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"4"</span><span class="p">){</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">8</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"5"</span><span class="p">){</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">9</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"7"</span><span class="p">){</span><span class="w">
    </span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">ex_image</span><span class="o">$</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s2">" - "</span><span class="p">)</span><span class="w">
    </span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">ex_image</span><span class="o">$</span><span class="n">image</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">ex_image</span><span class="o">$</span><span class="n">meancx</span><span class="p">)])</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="n">g.image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">ex_image</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">()</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y_height</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">paste</span><span class="p">(</span><span class="s2">"Experiment"</span><span class="p">,</span><span class="w"> </span><span class="n">ex_num</span><span class="p">,</span><span class="w"> </span><span class="s2">"- Mean Accuracy of Images"</span><span class="p">),</span><span class="w">
       </span><span class="n">y</span><span class="o">=</span><span class="s2">"Mean accuracy across subjects"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">unit</span><span class="p">(</span><span class="m">14</span><span class="p">,</span><span class="s2">"pt"</span><span class="p">)),</span><span class="w">
        </span><span class="n">axis.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">unit</span><span class="p">(</span><span class="m">20</span><span class="p">,</span><span class="s2">"pt"</span><span class="p">)),</span><span class="w">
    </span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">))</span><span class="w">
  
  </span><span class="nf">return</span><span class="p">(</span><span class="n">g.image</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">plot_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">ex_subject</span><span class="p">,</span><span class="w"> </span><span class="n">ex_num</span><span class="p">){</span><span class="w">
  
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"3a"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3b"</span><span class="p">)){</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"4"</span><span class="p">){</span><span class="w">
    </span><span class="n">y_height</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">8</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex_num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"5"</span><span class="p">){</span><span class="w">
    </span><span class="n">y_height</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">9</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">y_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="n">g.subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">ex_subject</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">()</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y_height</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">paste</span><span class="p">(</span><span class="s2">"Experiment"</span><span class="p">,</span><span class="w"> </span><span class="n">ex_num</span><span class="p">,</span><span class="w"> </span><span class="s2">"- Mean Accuracy of Subject"</span><span class="p">),</span><span class="w">
       </span><span class="n">y</span><span class="o">=</span><span class="s2">"Mean accuracy across images"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">())</span><span class="w">

  </span><span class="nf">return</span><span class="p">(</span><span class="n">g.subject</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1"># and to compute subject and image accuracies using confidence intervals instead of means</span><span class="w">
</span><span class="n">adjusted_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">ex_image</span><span class="p">,</span><span class="w"> </span><span class="n">ex_subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">0.5</span><span class="p">){</span><span class="w">
  </span><span class="n">ex_img_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">ex_image</span><span class="p">[</span><span class="n">ex_image</span><span class="o">$</span><span class="n">cilo</span><span class="o">&gt;</span><span class="n">level</span><span class="p">,])</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">ex_image</span><span class="p">)</span><span class="w">
  </span><span class="n">ex_subject_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">ex_subject</span><span class="p">[</span><span class="n">ex_subject</span><span class="o">$</span><span class="n">cilo</span><span class="o">&gt;</span><span class="n">level</span><span class="p">,])</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">ex_subject</span><span class="p">)</span><span class="w">

</span><span class="c1"># round for inclusion in the text</span><span class="w">
</span><span class="n">ex_img_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">ex_img_accuracy</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="w">
</span><span class="n">ex_subject_accuracy</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">ex_subject_accuracy</span><span class="p">,</span><span class="m">3</span><span class="p">)</span><span class="o">*</span><span class="m">100</span><span class="w">

  </span><span class="nf">return</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ex_img_accuracy</span><span class="p">,</span><span class="w">
              </span><span class="n">subject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ex_subject_accuracy</span><span class="p">))</span><span class="w">
</span><span class="p">}</span></code></pre>

</figure><!-- </details> --><h1 id="experiment-1">Experiment 1</h1><p>The first image uses images from <a href="https://arxiv.org/abs/1412.1897">Nguyen A, et al 2014</a>, which were generated using a ‚Äúcompositional pattern-producing network‚Äù that</p><blockquote><p>can produce images that both humans and DNNs can recognize.</p></blockquote><p>Importantly though,</p><blockquote><p>These images were produced on PicBreeder.org, a site where users serve as the fitness function in an evolutionary algorithm by selecting images they like, which become the parents of the next generation.</p></blockquote><p>So using these images may make the results particularly difficult to interpret, as it‚Äôs not clear how aesthetic preference interacts with the preference for recognizable objects. It could be the case that people pick images to preserve in the image generation process that look like real objects, so they aren‚Äôt ‚Äúadversarial‚Äù images, strictly speaking. Indeed, the authors of the image-generation paper note</p><blockquote><p>the generated images do often contain some features of the target class</p></blockquote><p>so a human classifying an image as the same class as a machine might be unsurprising for these images. Since some of the images do indeed resemble the ‚Äòtarget‚Äô classes, those images are unsuitable for assessing the degree to which the human visual system makes the same ‚Äòerrors‚Äô as machine vision.</p><p>The subjects in this task saw one of 48 ‚Äúfooling images,‚Äù and were presented with the ‚Äúcorrect‚Äù label and a randomly selected label from the other 47 images. The primary result the report for this experiment is that</p><blockquote><p>98% of observers chose the machine‚Äôs label at above-chance rates. [‚Ä¶] Additionally, 94% of the images showed above-chance human-machine agreement</p></blockquote><p>Reanalyzing by image and subject, however‚Ä¶</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="c1"># summarize the data and expand list to new</span><span class="w">
</span><span class="n">sum_1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_data</span><span class="p">(</span><span class="n">expt_1</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sum_1</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sum_1</span><span class="o">$</span><span class="n">subject</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e1_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"1"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e1_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-1-1.png" alt="plot of chunk unnamed-chunk-1" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e1_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"1"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e1_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/expt_1_2-1.png" alt="plot of chunk expt_1_2" /></p><p>So far so good, although if we use the binomial confidence intervals rather than just the mean response rate ‚Äì what I‚Äôll call corrected accuracies ‚Äì we get a more valid description of above-chance accuracy</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">subject</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><p>Only 85.4% of images were categorized above chance, and 81.2% of subjects did, as opposed to the reported 94% and 98%, respectively.</p><h1 id="experiment-2---1st-vs-2nd-best-labels">Experiment 2 - 1st vs 2nd best labels</h1><p>Of course, not all foil labels are created equal, so a more conservative test for human/machine overlap is to compare the highest and second highest labels predicted by the machine.</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">summary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_data</span><span class="p">(</span><span class="n">expt_2</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">summary</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">summary</span><span class="o">$</span><span class="n">subject</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e2_img</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"2"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e2_img</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-2-1.png" alt="plot of chunk unnamed-chunk-2" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e2_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"2"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e2_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-3-1.png" alt="plot of chunk unnamed-chunk-3" /></p><p>This looks much worse, and the corrected accuracies reflect that</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">subject</span><span class="p">)</span><span class="w">

</span><span class="n">total_acc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">expt_2</span><span class="p">[</span><span class="n">expt_2</span><span class="o">$</span><span class="n">correct</span><span class="o">==</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,])</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">expt_2</span><span class="p">)</span><span class="w">
</span><span class="n">total_acc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">total_acc</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span></code></pre>

</figure><!-- </details> --><p>Only 54.2% of images and 31.3% of subjects classified above chance, as opposed to the reported 71% and 91%, respectively.</p><p>Collapsing across all images and subjects, only 60.6% of responses agreed with the top category of the CNN.</p><p>We can see the accuracy-inflating strength of having bad foils by comparing experiment 1 vs 2. Images whose classifications remained high in experiment 2 are robust to their next-best label, while those that are significantly worse in experiment 2 are vulnerable.</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">left_join</span><span class="p">(</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="o">=</span><span class="s2">"image"</span><span class="p">)</span></code></pre>

</figure><figure class="highlight">

<pre><code class="language-text" data-lang="text">## Warning: Column `image` joining factors with different levels, coercing to
## character vector</code></pre>

</figure><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="o">$</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="o">$</span><span class="n">image</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="o">$</span><span class="n">meancx.x</span><span class="p">)])</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">e</span><span class="m">12</span><span class="err">_</span><span class="n">images</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo.x</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi.x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx.x</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">()</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo.y</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi.y</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx.y</span><span class="p">),</span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Experiment 1 vs Experiment 2 - Mean Accuracy of Images"</span><span class="p">,</span><span class="w">
       </span><span class="n">y</span><span class="o">=</span><span class="s2">"Mean accuracy across subjects"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">))</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-6-1.png" alt="plot of chunk unnamed-chunk-6" /></p><h1 id="experiments-3a-and-3b">Experiments 3a and 3b</h1><p>Experiments 3a and 3b presented all possible labels instead of two. 3a was the ‚Äúmachine theory of mind‚Äù task, and 3b asked subjects to rate what <em>they</em> thought the images were. First, the overall summaries of 3a</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">3</span><span class="n">a_summary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_data</span><span class="p">(</span><span class="n">expt_3a</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">a_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">a_summary</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">a_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">a_summary</span><span class="o">$</span><span class="n">subject</span><span class="w">


</span><span class="n">e</span><span class="m">3</span><span class="n">b_summary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_data</span><span class="p">(</span><span class="n">expt_3b</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">b_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">b_summary</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">b_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">b_summary</span><span class="o">$</span><span class="n">subject</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e3a_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">a_image</span><span class="p">,</span><span class="w"> </span><span class="s2">"3a"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e3a_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-8-1.png" alt="plot of chunk unnamed-chunk-8" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e3a_sub</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">a_subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"3a"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e3a_sub</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-9-1.png" alt="plot of chunk unnamed-chunk-9" /></p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">3</span><span class="n">a_acc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">a_image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">a_subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><p>Again, only 60.4% of images and 47.4% of subjects were above chance accuracy of 1/48, as opposed to the reported 79% and 88%, respectively. Experiment 3b has qualitatively the same results, but their interpretation doesn‚Äôt necessarily follow from the data:</p><blockquote><p>These results suggest that the humans‚Äôability to decipher adversarial images doesn‚Äôt depend on the peculiarities of our machine-theory-of-mind task, and that human performance reflects a more general agreement with machine (mis)classification.</p></blockquote><p>There are actually two degenerate interpretations here: either human performance is the same as machine performance, or the subjects were just rating what they thought the images were in all tasks. No further differentiating experiments were done to tease these interpretations apart, so this point is a wash.</p><p>Further, if one looks at the most accurately categorized images‚Ä¶</p><p><img src="/blog/assets/images/chainlink_fence.png" alt="chainlink fence" /></p><blockquote><p>Chainlink fence</p></blockquote><p><img src="/blog/assets/images/spotlight.png" alt="spotlight" /></p><blockquote><p>Spotlight</p></blockquote><p><img src="/blog/assets/images/monarch_butterfly.png" alt="monarch butterfly" /></p><blockquote><p>Monarch Butterfly</p></blockquote><p>‚Ä¶ we can easily see why they were. Remember the argument here is that these are supposedly adversarial images that fool a classifier. A finding that humans and image classification algorithms similarly categorize things that really do look like those categories is unremarkable.</p><h1 id="experiment-4---static-images">Experiment 4 - Static images</h1><p>Experiment 4 uses ‚Äústatic‚Äù images (from the same source paper), but also changes the task in a meaningful way. Rather than asking what category an image was, the subject is presented with the category and a set of representative images and asked ‚Äúwhich image has this category?‚Äù</p><p><img src="/blog/assets/images/static_task.png" alt="static image task" /></p><p>This experiment only has 8 images in the set of static images, and each is presented in every trial. The authors note that</p><blockquote><p>upon very close inspection, you may notice a small, often central,‚Äòobject‚Äô within each image.</p></blockquote><p>and they are actually quite pronounced. Even if the central ‚Äúobjects‚Äù don‚Äôt look recognizably like the categorized object, they are distinguishable that subjects should be able to recognize them between trials. Since the subjects are asked to choose one category for each of the images, it seems possible for them to use that information to exclude images from later trials. In other words, the trials are not independent. This is reflected in the positive slope of accuracy over trial number</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_e4</span><span class="p">(</span><span class="n">expt_4</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">subject</span><span class="w">
</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">trial</span><span class="w">

</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">8</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">trialNum</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_smooth</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">"lm"</span><span class="p">)</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-12-1.png" alt="plot of chunk unnamed-chunk-12" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">lm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lm</span><span class="p">(</span><span class="n">meancx</span><span class="o">~</span><span class="n">trialNum</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">trial</span><span class="p">)</span><span class="w">
</span><span class="n">summary</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">lm</span><span class="p">)</span></code></pre>

</figure><figure class="highlight">

<pre><code class="language-text" data-lang="text">## 
## Call:
## lm(formula = meancx ~ trialNum, data = e4_trial)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.040277 -0.022918 -0.000463  0.023489  0.044197 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.233034   0.021472  10.853 3.63e-05 ***
## trialNum    0.016182   0.005133   3.153   0.0197 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.03326 on 6 degrees of freedom
## Multiple R-squared:  0.6236,	Adjusted R-squared:  0.5608 
## F-statistic: 9.939 on 1 and 6 DF,  p-value: 0.01975</code></pre>

</figure><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e4_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"4"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e4_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-14-1.png" alt="plot of chunk unnamed-chunk-14" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e4_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"4"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e4_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-15-1.png" alt="plot of chunk unnamed-chunk-15" /></p><p>Again, the corrected accuracies are much lower than they report, accounting for uncertainty, only 75% of images and 8.4% of subjects had accuracies above chance, rather than the reported 100% and 81%, respectively. This is exceptionally troubling for their interpretation of their results, as it is <em>subject</em> accuracy that matters, not <em>image</em> accuracy.</p><h1 id="experiment-5---digit-classification">Experiment 5 - Digit classification</h1><p>In this experiment, perturbed MNIST digits are given, and the subjects are told they were miscategorized ‚Äì ie. choose the mistaken digit NOT the one that it looks like.</p><p>As a first pass, things look ok‚Ä¶</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_e5</span><span class="p">(</span><span class="n">expt_5</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">subject</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w">

</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">9</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e5_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"5"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e5_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-17-1.png" alt="plot of chunk unnamed-chunk-17" /></p><p>But something is off with the confusion matrix</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">expt_5</span><span class="o">$</span><span class="n">response</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">expt_5</span><span class="o">$</span><span class="n">response</span><span class="p">)</span><span class="w">
</span><span class="n">expt_5</span><span class="o">$</span><span class="n">target</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">expt_5</span><span class="o">$</span><span class="n">target</span><span class="p">)</span><span class="w">
</span><span class="n">cm5</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">caret</span><span class="o">::</span><span class="n">confusionMatrix</span><span class="p">(</span><span class="n">expt_5</span><span class="o">$</span><span class="n">response</span><span class="p">,</span><span class="w"> </span><span class="n">expt_5</span><span class="o">$</span><span class="n">target</span><span class="p">)</span><span class="w">
</span><span class="n">cm5</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reshape2</span><span class="o">::</span><span class="n">melt</span><span class="p">(</span><span class="n">cm5</span><span class="o">$</span><span class="n">table</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">cm5</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">as.factor</span><span class="p">(</span><span class="n">Reference</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">as.factor</span><span class="p">(</span><span class="n">Prediction</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="n">value</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_tile</span><span class="p">()</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-19-1.png" alt="plot of chunk unnamed-chunk-19" /></p><p>It looks like everyone just said everything was an 8. In the plot below, the rate of ‚Äú8‚Äù responses is colored in red.</p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meancx</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">()</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_pointrange</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">ymin</span><span class="o">=</span><span class="n">cilo8</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="o">=</span><span class="n">cihi8</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">meaneight</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Experiment 5 - black = mean correct responses, red = mean 8 responses"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">))</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-20-1.png" alt="plot of chunk unnamed-chunk-20" /></p><p>The interpretation of this experiment given in the paper is straightforwardly inaccurate. Most subjects did <em>not</em> agree with the machine classification, they just classified everything as an 8. The ‚Äúabove chance accuracy‚Äù of the target labels was only due to the very low rates of other digit responses.</p><p>This is reflected in the subject accuracy, where only 15.1% of subjects had accuracies significantly better than chance.</p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e5_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"5"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e5_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-21-1.png" alt="plot of chunk unnamed-chunk-21" /></p><h1 id="experiment-6">Experiment 6</h1><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_6</span><span class="p">(</span><span class="n">expt_6</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">subject</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">target</span><span class="w">

</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">0.5</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e6_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"6"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e6_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-23-1.png" alt="plot of chunk unnamed-chunk-23" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e6_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"6"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e6_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-24-1.png" alt="plot of chunk unnamed-chunk-24" /></p><p>These images have surprisingly high accuracy! At last! This one seems solid.</p><p>However, the image perturbation introduces small images <em>that look exactly like the target category</em> into the images. Some examples:</p><p>The ‚Äúrock beauty‚Äù fish with the highest accuracy: <img src="/blog/assets/images/perturb_fish.png" alt="perturbed fish" /></p><p>and the milk jug <img src="/blog/assets/images/perturb_milk.png" alt="perturbed milk" /></p><p>This is especially problematic since the task was to choose one of two labels ‚Äì as was the case in experiment 1 as compared to 2, even when the primary label isn‚Äôt immediately obvious, if the foil label is significantly worse the categorization becomes trivial.</p><h1 id="experiment-7">Experiment 7</h1><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_7</span><span class="p">(</span><span class="n">expt_7</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">image</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">sum</span><span class="o">$</span><span class="n">subject</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">imageName</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w">

</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">total</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">expt_7</span><span class="o">$</span><span class="n">correct</span><span class="p">)</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">expt_7</span><span class="p">),</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="o">*</span><span class="m">100</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e7_image</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_image</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="s2">"7"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e7_image</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-26-1.png" alt="plot of chunk unnamed-chunk-26" /></p><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">g.e7_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_subject</span><span class="p">(</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="s2">"7"</span><span class="p">)</span><span class="w">
</span><span class="n">g.e7_subject</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-27-1.png" alt="plot of chunk unnamed-chunk-27" /></p><p>Again, only 44.3% of images and 16.3% of subjects had accuracy significantly above chance, as opposed to the reported 78% of images and 83% of subjects. Overall, across all images and subjects, the total accuracy was 58.9%.</p><p>The image synthesis technique is tuned to minimize perceptual perturbations, but does impart a recognizable texture to the objects in the image. This was especially problematic in examples where the original image and the target class were semantically related, or had a similar texture, for example</p><p><img src="/blog/assets/images/dog_191_1.png" alt="dog 191_1" /></p><p>A dog_191, whose adversarial target was ‚Äúairedale‚Äù</p><p>In others, the texture was so obvious that it is no longer visually undetectable.</p><p><img src="/blog/assets/images/dog_63_1.png" alt="dog 61_1" /> Dog 63, whose adversarial target was ‚Äúindian cobra.‚Äù</p><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">acc_total</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">expt_7</span><span class="o">$</span><span class="n">correct</span><span class="p">)</span><span class="o">/</span><span class="n">nrow</span><span class="p">(</span><span class="n">expt_7</span><span class="p">)</span></code></pre>

</figure><!-- </details> --><h1 id="overall-summary">Overall summary</h1><!-- <details><summary style="background-color: #272822; color: #f8f8f2;">Expand/Collapse Code</summary> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meanrt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meanrt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meanrt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">image</span><span class="o">$</span><span class="n">meanrt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">

</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">sub</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">image</span><span class="p">[,</span><span class="o">-</span><span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">)]</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">a_accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">a_image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">a_subject</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="p">)</span><span class="w">
</span><span class="n">e</span><span class="m">3</span><span class="n">b_accs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adjusted_accuracy</span><span class="p">(</span><span class="n">e</span><span class="m">3</span><span class="n">b_image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="m">3</span><span class="n">b_subject</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="m">1</span><span class="o">/</span><span class="m">48</span><span class="p">)</span><span class="w">
</span><span class="n">all_images</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">bind_rows</span><span class="p">(</span><span class="s2">"expt_1"</span><span class="o">=</span><span class="n">e</span><span class="m">1</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w"> 
                    </span><span class="s2">"expt_2"</span><span class="o">=</span><span class="n">e</span><span class="m">2</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w"> 
                    </span><span class="s2">"expt_3a"</span><span class="o">=</span><span class="n">e</span><span class="m">3</span><span class="n">a_accs</span><span class="p">,</span><span class="w"> 
                    </span><span class="s2">"expt_3b"</span><span class="o">=</span><span class="n">e</span><span class="m">3</span><span class="n">b_accs</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"expt_4"</span><span class="o">=</span><span class="n">e</span><span class="m">4</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"expt_5"</span><span class="o">=</span><span class="n">e</span><span class="m">5</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"expt_6"</span><span class="o">=</span><span class="n">e</span><span class="m">6</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"expt_7"</span><span class="o">=</span><span class="n">e</span><span class="m">7</span><span class="err">_</span><span class="n">accs</span><span class="p">,</span><span class="w">
                    </span><span class="n">.id</span><span class="o">=</span><span class="s2">"expt"</span><span class="p">)</span><span class="w">

</span><span class="n">all_images</span><span class="o">$</span><span class="n">reported_img</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">     </span><span class="nf">c</span><span class="p">(</span><span class="m">94</span><span class="p">,</span><span class="w"> </span><span class="m">71</span><span class="p">,</span><span class="w"> </span><span class="m">79</span><span class="p">,</span><span class="w"> </span><span class="m">81</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">73</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">78</span><span class="p">)</span><span class="w">
</span><span class="n">all_images</span><span class="o">$</span><span class="n">reported_subject</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">98</span><span class="p">,</span><span class="w"> </span><span class="m">91</span><span class="p">,</span><span class="w"> </span><span class="m">88</span><span class="p">,</span><span class="w"> </span><span class="m">90</span><span class="p">,</span><span class="w"> </span><span class="m">81</span><span class="p">,</span><span class="w">  </span><span class="m">89</span><span class="p">,</span><span class="w"> </span><span class="m">87</span><span class="p">,</span><span class="w">  </span><span class="m">83</span><span class="p">)</span><span class="w">

</span><span class="n">all_im_melt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reshape2</span><span class="o">::</span><span class="n">melt</span><span class="p">(</span><span class="n">all_images</span><span class="p">,</span><span class="w"> </span><span class="n">measure.vars</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"image"</span><span class="p">,</span><span class="w"> </span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reported_img"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reported_subject"</span><span class="p">))</span><span class="w">

</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"image"</span><span class="w">
</span><span class="n">all_im_melt</span><span class="p">[</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">variable</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reported_subject"</span><span class="p">),]</span><span class="o">$</span><span class="n">type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"subject"</span><span class="w">

</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"adjusted"</span><span class="w">
</span><span class="n">all_im_melt</span><span class="p">[</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">variable</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"reported_subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reported_img"</span><span class="p">),]</span><span class="o">$</span><span class="n">which</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"reported"</span><span class="w">

</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">expt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">expt</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="n">experiment_names</span><span class="p">)</span><span class="w">
</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"image"</span><span class="p">,</span><span class="w"> </span><span class="s2">"subject"</span><span class="p">))</span><span class="w">
</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"reported"</span><span class="p">,</span><span class="w"> </span><span class="s2">"adjusted"</span><span class="p">))</span><span class="w">

</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which_type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which</span><span class="p">)</span><span class="w">
</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which_type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ordered</span><span class="p">(</span><span class="n">all_im_melt</span><span class="o">$</span><span class="n">which_type</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"image reported"</span><span class="p">,</span><span class="w"> </span><span class="s2">"subject reported"</span><span class="p">,</span><span class="w"> </span><span class="s2">"image adjusted"</span><span class="p">,</span><span class="w"> </span><span class="s2">"subject adjusted"</span><span class="p">))</span></code></pre>

</figure><!-- </details> --><figure class="highlight">

<pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">all_im_melt</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">expt</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">value</span><span class="p">,</span><span class="w"> 
                        </span><span class="n">fill</span><span class="o">=</span><span class="n">which_type</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">geom_col</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"dodge"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_brewer</span><span class="p">(</span><span class="n">palette</span><span class="o">=</span><span class="s2">"Paired"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="m">45</span><span class="p">,</span><span class="n">hjust</span><span class="o">=</span><span class="m">1</span><span class="p">))</span></code></pre>

</figure><p><img src="/blog/assets/images/2019-04-09-Adversarial-Analysis-of-Zhou-Firestone/unnamed-chunk-30-1.png" alt="plot of chunk unnamed-chunk-30" /></p></div><ul class="post__social"><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-facebook"></i></a></li><li><a href="https://twitter.com/intent/tweet?&text=An Adversarial (re)Analysis of Zhou/Firestone 2019+https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/+by+Jonny Saunders" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://plus.google.com/share?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-google-plus"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?mini=true&source=An Adversarial (re)Analysis of Zhou/Firestone 2019&summary=Reanalyzing Zhou & Firestone's adversarial image experiments&url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="https://www.stumbleupon.com/badge/?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-stumbleupon"></i></a></li><li><a href="https://www.reddit.com/submit?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-reddit-alien"></i></a></li><li><a href="https://www.tumblr.com/share/link?url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-tumblr"></i></a></li><li><a href="https://www.pinterest.com/pin/create/link/?description=Reanalyzing Zhou & Firestone's adversarial image experiments&media=https://jon-e.net/blog/blog/assets/images/zhou_header.png&url=https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/" target="_blank"><i class="fa fa-pinterest"></i></a></li></ul></div>--></div><!-- Everything inside the #author tags pulls data from the author --><div class="section-padding--none"><div class="grid"><hr class="sep"/></div></div><div class="section-padding"><div class="grid-small"> <span class="post__author">Posted by <a href="http://jon-e.net" title="More By Jonny Saunders">Jonny Saunders</a></span><p class="post__bio">bad at programming and neuroscience in beautiful Oregon.</p></div></div><!-- If you use Disqus comments, just uncomment this block. The only thing you need to change is "test-apkdzgmqhj" - which should be replaced with your own Disqus site-id.<div class="post__comments section-padding"><div class="grid-small"><div id="disqus_thread"></div><script> var disqus_config = function () { this.page.url = 'https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/'; this.page.identifier = 'https://jon-e.net/blog/2019/04/09/Adversarial-Analysis-of-Zhou-Firestone_render/'; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://jon-e.disqus.com/embed.js'; s.setAttribute('data-timestamp', + new Date()); (d.head || d.body).appendChild(s); })(); </script></div></div>--></article></div><!-- Links to Previous/Next posts --></main><!-- The footer at the very bottom of the screen --><footer class="footer section-padding"><div class="grid"><div class="subscribe" id="subscribe"><div class="subscribe__container"> <span class="subscribe__title">Subscribe</span><p class="subscribe__text">Get a weekly email of posts I‚Äôve added to the site.</p><form method="POST" action="&amp;c=?" id="mc-signup" name="mc-embedded-subscribe-form" novalidate> <!-- This is required for the form to work correctly --><div style="position: absolute; left: -5000px;" aria-hidden="true"> <input type="text" name="" tabindex="-1" value=""></div><div class="form-group"> <input id="mce-EMAIL" type="email" name="EMAIL" placeholder="Email Address"></div><div class="form__btn"> <input id="mc-submit" type="submit" value="Sign Up" name="subscribe"></div></form><p class="subscribe__error hidden"></p></div></div><hr class="sep--white"/><div class="footer__container"><ul class="footer__tags"><li><a class="footer__link" href="/blog/tag/science">Science</a></li><li><a class="footer__link" href="/blog/tag/art">Art</a></li><li><a class="footer__link" href="/blog/tag/video">Video</a></li><li><a class="footer__link" href="/blog/tag/audio">Audio</a></li><li><a class="footer__link" href="/blog/tag/bad_art">Bad_art</a></li></ul><ul class="footer__social"><li><a href="https://twitter.com/json_dirs" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://github.com/sneakers-the-rat" target="_blank"><i class="fa fa-github"></i></a></li></ul></div></div></footer><section class="contact popup"><div class="popup__close"><div class="popup__exit"></div></div><div class="contact__container popup__container"><div class="contact__img"><figure class="absolute-bg" style="background-image: url(/blog/assets/images/emailin_me.gif);"></figure></div><div class="contact__content"><div class="contact__mast section-padding--half"><div class="grid"><h2>Contact</h2></div></div><div class="section-padding--none"><hr class="sep"/></div><div class="contact__form section-padding--half"><div class="grid-xlarge"> <form id="form" class="form" action="https://formcarry.com/s/x7yoFO6sk0n" method="POST"><div class="form__subcontainer"><div> <label for="form-first-name">First Name</label> <input type="text" name="first-name" id="form-first-name" required></div><div> <label for="form-last-name">Last Name</label> <input type="text" name="last-name" id="form-last-name" required></div></div><div> <label for="form-email">E-Mail</label> <input type="email" name="email" id="form-email" required></div><div> <label for="form-message">Message</label> <textarea name="message" id="form-message" rows="3"></textarea></div><div class="form__submit"><div class="form__btn"> <input type="submit" value="Send"></div></div><p class="form__message"></p></form></div></div></div></div></section><script src="/blog/assets/js/app.min.js"></script></body></html>

					

					